---
export const prerender = true;
import { type CollectionEntry, getCollection } from "astro:content";
import UniCourseLayout from "../../layouts/UniCourseLayout.astro";

export async function getStaticPaths() {
  const courses = await getCollection("course");
  return courses.map((course) => ({
    params: { slug: course.slug },
    props: course,
  }));
}
type Props = CollectionEntry<"course">;

const course = Astro.props;
const assignmentCollection = await getCollection("assignment");
let assignments = assignmentCollection.filter(
  (ass) => ass.data.course == course.data.initials
);

// sort assignemnts
assignments = assignments.sort((a, b) => {
  if (a.data.number > b.data.number) {
    return 1;
  } else if (b.data.number > a.data.number) {
    return -1;
  } else {
    return 0;
  }
});
---

<UniCourseLayout
  CourseName={course.data.title}
  CourseInitials={course.data.initials}
  CourseFinalLink={"/project/" + course.data.initials}
>
  <ol slot="list">
    {
      assignments.map((post) => {
        return (
          <a href={"/assignment/" + post.slug}>
            <li>{post.data.title}</li>
          </a>
        );
      })
    }
  </ol>
  <style>
    ol {
      list-style-type: None;
    }
  </style>
</UniCourseLayout>
